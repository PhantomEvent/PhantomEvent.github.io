<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XSS Event Listener</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.0/dist/web3.min.js"></script>
    <style>
        .event {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>XSS Events</h1>
    <div id="events"></div>

    <script>

        const web3 = new Web3(new Web3.providers.WebsocketProvider("https://data-seed-prebsc-1-s1.binance.org:8545"));

        const contractAddress = "0xc6846442B5CA46572d2200dD5c9A55BCdA0Ccf37";
        
        const contractABI = [
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_xss",
				"type": "string"
			}
		],
		"name": "triggerXSS",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "xss",
				"type": "string"
			}
		],
		"name": "XSS",
		"type": "event"
	}
];

        const contract = new web3.eth.Contract(contractABI, contractAddress);


        contract.events.XSS({
            fromBlock: 0
        })
        .on('data', function(event) {
            displayEvent(event);
        })
        .on('error', console.error);


        function displayEvent(event) {
            const eventsDiv = document.getElementById('events');
            const eventElement = document.createElement('div');
            eventElement.className = 'event';
            eventElement.innerText = event.returnValues.xss;
            eventsDiv.appendChild(eventElement);
        }
    </script>
</body>
</html>
